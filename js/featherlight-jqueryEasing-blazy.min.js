!function(e){"use strict";function t(e,n){if(!(this instanceof t)){var o=new t(e,n);return o.open(),o}this.id=t.id++,this.setup(e,n),this.chainCallbacks(t._callbackChain)}if("undefined"==typeof e)return void("console"in window&&window.console.info("Too much lightness, Featherlight needs jQuery."));var n=[],o=function(t){return n=e.grep(n,function(e){return e!==t&&e.$instance.closest("body").length>0})},r=function(e,t){var n={},o=new RegExp("^"+t+"([A-Z])(.*)");for(var r in e){var i=r.match(o);if(i){var s=(i[1]+i[2].replace(/([A-Z])/g,"-$1")).toLowerCase();n[s]=e[r]}}return n},i={keyup:"onKeyUp",resize:"onResize"},s=function(n){e.each(t.opened().reverse(),function(){return n.isDefaultPrevented()||!1!==this[i[n.type]](n)?void 0:(n.preventDefault(),n.stopPropagation(),!1)})},a=function(n){if(n!==t._globalHandlerInstalled){t._globalHandlerInstalled=n;var o=e.map(i,function(e,n){return n+"."+t.prototype.namespace}).join(" ");e(window)[n?"on":"off"](o,s)}};t.prototype={constructor:t,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:e.noop,beforeContent:e.noop,beforeClose:e.noop,afterOpen:e.noop,afterContent:e.noop,afterClose:e.noop,onKeyUp:e.noop,onResize:e.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(t,n){"object"!=typeof t||t instanceof e!=0||n||(n=t,t=void 0);var o=e.extend(this,n,{target:t}),r=o.resetCss?o.namespace+"-reset":o.namespace,i=e(o.background||['<div class="'+r+"-loading "+r+'">','<div class="'+r+'-content">','<span class="'+r+"-close-icon "+o.namespace+'-close">',o.closeIcon,"</span>",'<div class="'+o.namespace+'-inner">'+o.loading+"</div>","</div>","</div>"].join("")),s="."+o.namespace+"-close"+(o.otherClose?","+o.otherClose:"");return o.$instance=i.clone().addClass(o.variant),o.$instance.on(o.closeTrigger+"."+o.namespace,function(t){var n=e(t.target);("background"===o.closeOnClick&&n.is("."+o.namespace)||"anywhere"===o.closeOnClick||n.closest(s).length)&&(o.close(t),t.preventDefault())}),this},getContent:function(){if(this.persist!==!1&&this.$content)return this.$content;var t=this,n=this.constructor.contentFilters,o=function(e){return t.$currentTarget&&t.$currentTarget.attr(e)},r=o(t.targetAttr),i=t.target||r||"",s=n[t.type];if(!s&&i in n&&(s=n[i],i=t.target&&r),i=i||o("href")||"",!s)for(var a in n)t[a]&&(s=n[a],i=t[a]);if(!s){var c=i;if(i=null,e.each(t.contentFilters,function(){return s=n[this],s.test&&(i=s.test(c)),!i&&s.regex&&c.match&&c.match(s.regex)&&(i=c),!i}),!i)return"console"in window&&window.console.error("Featherlight: no content filter found "+(c?' for "'+c+'"':" (no target specified)")),!1}return s.process.call(t,i)},setContent:function(t){var n=this;return(t.is("iframe")||e("iframe",t).length>0)&&n.$instance.addClass(n.namespace+"-iframe"),n.$instance.removeClass(n.namespace+"-loading"),n.$instance.find("."+n.namespace+"-inner").not(t).slice(1).remove().end().replaceWith(e.contains(n.$instance[0],t[0])?"":t),n.$content=t.addClass(n.namespace+"-inner"),n},open:function(t){var o=this;if(o.$instance.hide().appendTo(o.root),!(t&&t.isDefaultPrevented()||o.beforeOpen(t)===!1)){t&&t.preventDefault();var r=o.getContent();if(r)return n.push(o),a(!0),o.$instance.fadeIn(o.openSpeed),o.beforeContent(t),e.when(r).always(function(e){o.setContent(e),o.afterContent(t)}).then(o.$instance.promise()).done(function(){o.afterOpen(t)})}return o.$instance.detach(),e.Deferred().reject().promise()},close:function(t){var n=this,r=e.Deferred();return n.beforeClose(t)===!1?r.reject():(0===o(n).length&&a(!1),n.$instance.fadeOut(n.closeSpeed,function(){n.$instance.detach(),n.afterClose(t),r.resolve()})),r.promise()},resize:function(e,t){if(e&&t){this.$content.css("width","").css("height","");var n=Math.max(e/(parseInt(this.$content.parent().css("width"),10)-1),t/(parseInt(this.$content.parent().css("height"),10)-1));n>1&&(n=t/Math.floor(t/n),this.$content.css("width",""+e/n+"px").css("height",""+t/n+"px"))}},chainCallbacks:function(t){for(var n in t)this[n]=e.proxy(t[n],this,e.proxy(this[n],this))}},e.extend(t,{id:0,autoBind:"[data-featherlight]",defaults:t.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(t){return t instanceof e&&t},process:function(t){return this.persist!==!1?e(t):e(t).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff|bmp|svg)(\?\S*)?$/i,process:function(t){var n=this,o=e.Deferred(),r=new Image,i=e('<img src="'+t+'" alt="" class="'+n.namespace+'-image" />');return r.onload=function(){i.naturalWidth=r.width,i.naturalHeight=r.height,o.resolve(i)},r.onerror=function(){o.reject(i)},r.src=t,o.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(t){return e(t)}},ajax:{regex:/./,process:function(t){var n=e.Deferred(),o=e("<div></div>").load(t,function(e,t){"error"!==t&&n.resolve(o.contents()),n.fail()});return n.promise()}},iframe:{process:function(t){var n=new e.Deferred,o=e("<iframe/>").hide().attr("src",t).css(r(this,"iframe")).on("load",function(){n.resolve(o.show())}).appendTo(this.$instance.find("."+this.namespace+"-content"));return n.promise()}},text:{process:function(t){return e("<div>",{text:t})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(t,n){var o=this,r=new RegExp("^data-"+n+"-(.*)"),i={};return t&&t.attributes&&e.each(t.attributes,function(){var t=this.name.match(r);if(t){var n=this.value,s=e.camelCase(t[1]);if(e.inArray(s,o.functionAttributes)>=0)n=new Function(n);else try{n=e.parseJSON(n)}catch(a){}i[s]=n}}),i},extend:function(t,n){var o=function(){this.constructor=t};return o.prototype=this.prototype,t.prototype=new o,t.__super__=this.prototype,e.extend(t,this,n),t.defaults=t.prototype,t},attach:function(t,n,o){var r=this;"object"!=typeof n||n instanceof e!=0||o||(o=n,n=void 0),o=e.extend({},o);var i,s=o.namespace||r.defaults.namespace,a=e.extend({},r.defaults,r.readElementConfig(t[0],s),o);return t.on(a.openTrigger+"."+a.namespace,a.filter,function(s){var c=e.extend({$source:t,$currentTarget:e(this)},r.readElementConfig(t[0],a.namespace),r.readElementConfig(this,a.namespace),o),u=i||e(this).data("featherlight-persisted")||new r(n,c);"shared"===u.persist?i=u:u.persist!==!1&&e(this).data("featherlight-persisted",u),c.$currentTarget.blur(),u.open(s)}),t},current:function(){var e=this.opened();return e[e.length-1]||null},opened:function(){var t=this;return o(),e.grep(n,function(e){return e instanceof t})},close:function(e){var t=this.current();return t?t.close(e):void 0},_onReady:function(){var t=this;t.autoBind&&(e(t.autoBind).each(function(){t.attach(e(this))}),e(document).on("click",t.autoBind,function(n){n.isDefaultPrevented()||"featherlight"===n.namespace||(n.preventDefault(),t.attach(e(n.currentTarget)),e(n.target).trigger("click.featherlight"))}))},_callbackChain:{onKeyUp:function(t,n){return 27===n.keyCode?(this.closeOnEsc&&e.featherlight.close(n),!1):t(n)},onResize:function(e,t){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),e(t)},afterContent:function(e,t){var n=e(t);return this.onResize(t),n}}}),e.featherlight=t,e.fn.featherlight=function(e,n){return t.attach(this,e,n)},e(document).ready(function(){t._onReady()})}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,o,r){return jQuery.easing[jQuery.easing.def](e,t,n,o,r)},easeInQuad:function(e,t,n,o,r){return o*(t/=r)*t+n},easeOutQuad:function(e,t,n,o,r){return-o*(t/=r)*(t-2)+n},easeInOutQuad:function(e,t,n,o,r){return(t/=r/2)<1?o/2*t*t+n:-o/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,o,r){return o*(t/=r)*t*t+n},easeOutCubic:function(e,t,n,o,r){return o*((t=t/r-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,o,r){return(t/=r/2)<1?o/2*t*t*t+n:o/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,o,r){return o*(t/=r)*t*t*t+n},easeOutQuart:function(e,t,n,o,r){return-o*((t=t/r-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,o,r){return(t/=r/2)<1?o/2*t*t*t*t+n:-o/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,o,r){return o*(t/=r)*t*t*t*t+n},easeOutQuint:function(e,t,n,o,r){return o*((t=t/r-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,o,r){return(t/=r/2)<1?o/2*t*t*t*t*t+n:o/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,o,r){return-o*Math.cos(t/r*(Math.PI/2))+o+n},easeOutSine:function(e,t,n,o,r){return o*Math.sin(t/r*(Math.PI/2))+n},easeInOutSine:function(e,t,n,o,r){return-o/2*(Math.cos(Math.PI*t/r)-1)+n},easeInExpo:function(e,t,n,o,r){return 0==t?n:o*Math.pow(2,10*(t/r-1))+n},easeOutExpo:function(e,t,n,o,r){return t==r?n+o:o*(-Math.pow(2,-10*t/r)+1)+n},easeInOutExpo:function(e,t,n,o,r){return 0==t?n:t==r?n+o:(t/=r/2)<1?o/2*Math.pow(2,10*(t-1))+n:o/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,o,r){return-o*(Math.sqrt(1-(t/=r)*t)-1)+n},easeOutCirc:function(e,t,n,o,r){return o*Math.sqrt(1-(t=t/r-1)*t)+n},easeInOutCirc:function(e,t,n,o,r){return(t/=r/2)<1?-o/2*(Math.sqrt(1-t*t)-1)+n:o/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,o,r){var i=1.70158,s=0,a=o;if(0==t)return n;if(1==(t/=r))return n+o;if(s||(s=.3*r),a<Math.abs(o)){a=o;var i=s/4}else var i=s/(2*Math.PI)*Math.asin(o/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/s))+n},easeOutElastic:function(e,t,n,o,r){var i=1.70158,s=0,a=o;if(0==t)return n;if(1==(t/=r))return n+o;if(s||(s=.3*r),a<Math.abs(o)){a=o;var i=s/4}else var i=s/(2*Math.PI)*Math.asin(o/a);return a*Math.pow(2,-10*t)*Math.sin((t*r-i)*(2*Math.PI)/s)+o+n},easeInOutElastic:function(e,t,n,o,r){var i=1.70158,s=0,a=o;if(0==t)return n;if(2==(t/=r/2))return n+o;if(s||(s=r*(.3*1.5)),a<Math.abs(o)){a=o;var i=s/4}else var i=s/(2*Math.PI)*Math.asin(o/a);return 1>t?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/s))+n:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/s)*.5+o+n},easeInBack:function(e,t,n,o,r,i){return void 0==i&&(i=1.70158),o*(t/=r)*t*((i+1)*t-i)+n},easeOutBack:function(e,t,n,o,r,i){return void 0==i&&(i=1.70158),o*((t=t/r-1)*t*((i+1)*t+i)+1)+n},easeInOutBack:function(e,t,n,o,r,i){return void 0==i&&(i=1.70158),(t/=r/2)<1?o/2*(t*t*(((i*=1.525)+1)*t-i))+n:o/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+n},easeInBounce:function(e,t,n,o,r){return o-jQuery.easing.easeOutBounce(e,r-t,0,o,r)+n},easeOutBounce:function(e,t,n,o,r){return(t/=r)<1/2.75?o*(7.5625*t*t)+n:2/2.75>t?o*(7.5625*(t-=1.5/2.75)*t+.75)+n:2.5/2.75>t?o*(7.5625*(t-=2.25/2.75)*t+.9375)+n:o*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,o,r){return r/2>t?.5*jQuery.easing.easeInBounce(e,2*t,0,o,r)+n:.5*jQuery.easing.easeOutBounce(e,2*t-r,0,o,r)+.5*o+n}}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.Blazy=t()}(this,function(){function e(e){var n=e._util;n.elements=c(e.options),n.count=n.elements.length,n.destroyed&&(n.destroyed=!1,e.options.container&&p(e.options.container,function(e){f(e,"scroll",n.validateT)}),f(window,"resize",n.saveViewportOffsetT),f(window,"resize",n.validateT),f(window,"scroll",n.validateT)),t(e)}function t(e){for(var t=e._util,o=0;o<t.count;o++){var r,i=t.elements[o],a=i;r=e.options;var c=a.getBoundingClientRect();r.container&&m&&(a=a.closest(r.containerClass))?(a=a.getBoundingClientRect(),r=n(a,v)?n(c,{top:a.top-r.offset,right:a.right+r.offset,bottom:a.bottom+r.offset,left:a.left-r.offset}):!1):r=n(c,v),(r||s(i,e.options.successClass))&&(e.load(i),t.elements.splice(o,1),t.count--,o--)}0===t.count&&e.destroy()}function n(e,t){return e.right>=t.left&&e.bottom>=t.top&&e.left<=t.right&&e.top<=t.bottom}function o(e,t,n){if(!s(e,n.successClass)&&(t||n.loadInvisible||0<e.offsetWidth&&0<e.offsetHeight))if(t=e.getAttribute(h)||e.getAttribute(n.src)){t=t.split(n.separator);var o=t[g&&1<t.length?1:0],c=e.getAttribute(n.srcset),u="img"===e.nodeName.toLowerCase(),d=(t=e.parentNode)&&"picture"===t.nodeName.toLowerCase();if(u||void 0===e.src){var v=new Image,m=function(){n.error&&n.error(e,"invalid"),a(e,n.errorClass),l(v,"error",m),l(v,"load",w)},w=function(){u?d||i(e,o,c):e.style.backgroundImage='url("'+o+'")',r(e,n),l(v,"load",w),l(v,"error",m)};d&&(v=e,p(t.getElementsByTagName("source"),function(e){var t=n.srcset,o=e.getAttribute(t);o&&(e.setAttribute("srcset",o),e.removeAttribute(t))})),f(v,"error",m),f(v,"load",w),i(v,o,c)}else e.src=o,r(e,n)}else"video"===e.nodeName.toLowerCase()?(p(e.getElementsByTagName("source"),function(e){var t=n.src,o=e.getAttribute(t);o&&(e.setAttribute("src",o),e.removeAttribute(t))}),e.load(),r(e,n)):(n.error&&n.error(e,"missing"),a(e,n.errorClass))}function r(e,t){a(e,t.successClass),t.success&&t.success(e),e.removeAttribute(t.src),e.removeAttribute(t.srcset),p(t.breakpoints,function(t){e.removeAttribute(t.src)})}function i(e,t,n){n&&e.setAttribute("srcset",n),e.src=t}function s(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function a(e,t){s(e,t)||(e.className+=" "+t)}function c(e){var t=[];e=e.root.querySelectorAll(e.selector);for(var n=e.length;n--;t.unshift(e[n]));return t}function u(e){v.bottom=(window.innerHeight||document.documentElement.clientHeight)+e,v.right=(window.innerWidth||document.documentElement.clientWidth)+e}function f(e,t,n){e.attachEvent?e.attachEvent&&e.attachEvent("on"+t,n):e.addEventListener(t,n,{capture:!1,passive:!0})}function l(e,t,n){e.detachEvent?e.detachEvent&&e.detachEvent("on"+t,n):e.removeEventListener(t,n,{capture:!1,passive:!0})}function p(e,t){if(e&&t)for(var n=e.length,o=0;n>o&&!1!==t(e[o],o);o++);}function d(e,t,n){var o=0;return function(){var r=+new Date;t>r-o||(o=r,e.apply(n,arguments))}}var h,v,g,m;return function(n){if(!document.querySelectorAll){var r=document.createStyleSheet();document.querySelectorAll=function(e,t,n,o,i){for(i=document.all,t=[],e=e.replace(/\[for\b/gi,"[htmlFor").split(","),n=e.length;n--;){for(r.addRule(e[n],"k:v"),o=i.length;o--;)i[o].currentStyle.k&&t.push(i[o]);r.removeRule(0)}return t}}var i=this,s=i._util={};s.elements=[],s.destroyed=!0,i.options=n||{},i.options.error=i.options.error||!1,i.options.offset=i.options.offset||100,i.options.root=i.options.root||document,i.options.success=i.options.success||!1,i.options.selector=i.options.selector||".b-lazy",i.options.separator=i.options.separator||"|",i.options.containerClass=i.options.container,i.options.container=i.options.containerClass?document.querySelectorAll(i.options.containerClass):!1,i.options.errorClass=i.options.errorClass||"b-error",i.options.breakpoints=i.options.breakpoints||!1,i.options.loadInvisible=i.options.loadInvisible||!1,i.options.successClass=i.options.successClass||"b-loaded",i.options.validateDelay=i.options.validateDelay||25,i.options.saveViewportOffsetDelay=i.options.saveViewportOffsetDelay||50,i.options.srcset=i.options.srcset||"data-srcset",i.options.src=h=i.options.src||"data-src",m=Element.prototype.closest,g=1<window.devicePixelRatio,v={},v.top=0-i.options.offset,v.left=0-i.options.offset,i.revalidate=function(){e(i)},i.load=function(e,t){var n=this.options;void 0===e.length?o(e,t,n):p(e,function(e){o(e,t,n)})},i.destroy=function(){var e=this._util;this.options.container&&p(this.options.container,function(t){l(t,"scroll",e.validateT)}),l(window,"scroll",e.validateT),l(window,"resize",e.validateT),l(window,"resize",e.saveViewportOffsetT),e.count=0,e.elements.length=0,e.destroyed=!0},s.validateT=d(function(){t(i)},i.options.validateDelay,i),s.saveViewportOffsetT=d(function(){u(i.options.offset)},i.options.saveViewportOffsetDelay,i),u(i.options.offset),p(i.options.breakpoints,function(e){return e.width>=window.screen.width?(h=e.src,!1):void 0}),setTimeout(function(){e(i)})}});